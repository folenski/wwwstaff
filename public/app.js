var p=Object.defineProperty,b=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var f=(r,e,t)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,n=(r,e)=>{for(var t in e||(e={}))E.call(e,t)&&f(r,t,e[t]);if(c)for(var t of c(e))k.call(e,t)&&f(r,t,e[t]);return r},o=(r,e)=>b(r,g(e));var y=(r,e,t)=>new Promise((a,s)=>{var i=l=>{try{m(t.next(l))}catch(v){s(v)}},u=l=>{try{m(t.throw(l))}catch(v){s(v)}},m=l=>l.done?a(l.value):Promise.resolve(l.value).then(i,u);m((t=t.apply(r,e)).next())});var d=class{constructor(e,t){this._ParamDefault={idform:"none",url:"/api/msg",errorMsg:"An error was encountered<br/>Please try again later",overlay:{from:"bottom",class:["form-overlay"]},btn:{lib:"Ok",class:["btn"]}};this._transition=!1;this.submitForm=e=>y(this,null,function*(){if(e.preventDefault(),!this._Param.url)return;let t={};Array.from(this._element).forEach(i=>{if(i instanceof HTMLTextAreaElement||i instanceof HTMLInputElement)switch(i.name){case"nom":t=o(n({},t),{nom:i.value});break;case"tel":t=o(n({},t),{tel:i.value});break;case"mail":t=o(n({},t),{mail:i.value});break;case"sujet":t=o(n({},t),{sujet:i.value});break;case"message":t=o(n({},t),{message:i.value});break;default:break}});let a=this._Param.errorMsg;this._overlay.style.display="block";let s=yield fetch(this._Param.url,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});s.ok?a=(yield s.json()).msg:console.error("Contact: Error response -  ",s),a&&(this._overlayTxt.innerHTML=a,this.openOverlay())});this.transitionendOverlay=()=>{!this._transition||(this._transition=!1,this._overlayContent.style.opacity==="0"&&(this._overlay.style.opacity="0"))};this.handleBack=e=>{e.preventDefault(),this._element.reset(),this.initOverlay(),this._overlay.addEventListener("transitionend",this.handleBackEnd)};this.handleBackEnd=()=>{this._overlay.style.display="none",this._overlay.removeEventListener("transitionend",this.handleBackEnd)};this._element=e,this._Param=n(n({},this._ParamDefault),t),this.createOverlay(),this.initOverlay(),this._overlay.addEventListener("transitionend",this.transitionendOverlay),this._element.addEventListener("submit",this.submitForm)}createOverlay(){this._overlay=document.createElement("div"),this._overlay.style.display="none",this._overlay.style.opacity="0";let e=this._element.parentElement;if(e&&e.appendChild(this._overlay),this._Param.overlay&&this._Param.overlay.class.forEach(t=>this._overlay.classList.add(t)),this._overlayContent=document.createElement("div"),this._overlay.appendChild(this._overlayContent),this._overlayTxt=document.createElement("span"),this._overlayContent.appendChild(this._overlayTxt),this._overlayContent.appendChild(document.createElement("br")),this._Param.btn){let t=document.createElement("button");t.innerHTML=this._Param.btn.lib,this._Param.btn.class.forEach(a=>t.classList.add(a)),t.addEventListener("click",this.handleBack),this._overlayContent.appendChild(t)}}initOverlay(){if(!!this._Param.overlay)switch(this._overlayContent.style.opacity="0",this._transition=!0,this._Param.overlay.from){case"top":this._overlay.style.height="0",this._overlay.style.width="100%",this._overlay.style.top="0";break;case"right":this._overlay.style.height="100%",this._overlay.style.width="0",this._overlay.style.top="0",this._overlay.style.right="0";break;case"left":this._overlay.style.height="100%",this._overlay.style.width="0",this._overlay.style.top="0",this._overlay.style.left="0";break;default:this._overlay.style.height="0",this._overlay.style.width="100%",this._overlay.style.bottom="0";break}}openOverlay(){if(!!this._Param.overlay)switch(this._overlay.style.opacity="1",this._overlayContent.style.opacity="1",this._Param.overlay.from){case"top":this._overlay.style.height="100%";break;case"right":case"left":this._overlay.style.width="100%";break;default:this._overlay.style.height="100%";break}}static bind(e){return y(this,null,function*(){let t=document.getElementById(e.idform);if(t instanceof HTMLFormElement)return new d(t,e)})}},_=d;var h=class{constructor(e,t){this.timerLoad=100,this.threshold=.3,this.tpsAnim="1.3s",this.tpsAnimDisplay="3s",this.infinite=!1,this.decalage=3,this.reveal="",this.doInit=(s=!1)=>{if(!!this.element)if(s)this.reveal=="display"?this.element.style.transition=`opacity ${this.tpsAnimDisplay} ease-out `:this.element.style.transition=this.tpsAnim;else switch(this.element.style.opacity="0",this.element.style.visibility="hidden",this.reveal){case"top":this.element.style.transform=`translate(0, ${-1*this.decalage}rem)`;break;case"left":this.element.style.transform=`translate(${-1*this.decalage}rem)`;break;case"right":this.element.style.transform=`translate(${this.decalage}rem)`;break;default:break}},this.doReveal=()=>{!this.element||!this.isVisible||(this.element.style.visibility="inherit",this.element.style.opacity="",this.reveal!="display"&&(this.element.style.transform=""))},this.onResize=()=>{this.doInit()},this.element=e,this.element.dataset.reveal&&(this.reveal=this.element.dataset.reveal),this.threshold=t!=null&&t.threshold?t.threshold:this.threshold,this.infinite=t!=null&&t.infinite?t.infinite:this.infinite,this.tpsAnimDisplay=t!=null&&t.tpsAnimDisplay?t.tpsAnimDisplay:this.tpsAnimDisplay,this.tpsAnim=t!=null&&t.tpsAnim?t.tpsAnim:this.tpsAnim,this.timerLoad=t!=null&&t.timerLoad?t.timerLoad:this.timerLoad;let a=new IntersectionObserver(s=>{for(let i of s)i.isIntersecting?(document.addEventListener("resize",this.onResize),this.isVisible=!0,window.requestAnimationFrame(()=>{this.doReveal()})):(this.isVisible=!1,this.infinite&&this.doInit(),window.removeEventListener("resize",this.onResize))},{threshold:this.threshold});this.doInit(),window.addEventListener("load",()=>{if(!this.element)return;let s=this.element;this.doInit(!0),setTimeout(()=>a.observe(s),this.timerLoad)})}static bind(){return y(this,arguments,function*(e={}){return Array.from(document.querySelectorAll("[data-reveal]")).map(t=>{if(t instanceof HTMLElement)return new h(t,e)})})}};h.bind({infinite:!0});_.bind({idform:"contactForm",btn:{lib:"Ok",class:["btn","secondary"]},overlay:{from:"right",class:["form-overlay","primary"]}});
//# sourceMappingURL=app.js.map
